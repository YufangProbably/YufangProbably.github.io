<!DOCTYPE html>
<html>

<head>
  <title>有头苍蝇</title>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <h1>有头苍蝇.jpg</h1>
  <p>P tag test</p><br/>
  <textarea rows="6" cols="50" id="write" class="unspaced" placeholder="Please type..."></textarea>
  <button onclick="setWrite()" class="unspaced">Commit to no where</button><br/>
  <br/>
  <a href="./esolangs">esolang</a><br/>

<script>
  const setCookie = (name,value,exdays) => {
    document.cookie = `${name}=${value};max-age=${24*60*60*exdays}`;
  }
  const delCookie = (name) => setCookie(name,'',0)
  const getCookie = (name) => document.cookie.replace(
    new RegExp(`(?:(?:^|.*;\\s*)${name}\\s*\\=\\s*([^;]*).*$)|^.*$`),
    "$1",
  );

  const setWrite = () => {
    let text = document.getElementById("write").value;
    alert(`👍You just commited ${text ? '"'+text+'"' : "Nothing"}👍`);
    setCookie("message",document.getElementById("write").value,365)
  };

  document.getElementById("write").value = getCookie("message");

  const params = new URL(document.location.href).searchParams;
  if (params.get("type") == "writeonly") {
    setCookie("message",params.get("text"),365);
    document.documentElement.innerHTML = "";
  } else if (params.get("type") == "readonly") {
    document.documentElement.innerHTML = getCookie("message");
  }
</script>
</body>

</html>